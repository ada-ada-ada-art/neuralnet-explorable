var radius=10,neuraSketches=[],NeuraSketch=function(e){var t={sketchDOMId:"",turnRateSelector:"",shouldRunInfinitely:!1,infiniteCallback:{func:null,params:[]},stopText:"Return Neura"};for(var n in e)t[n]=e[n];this.thisSketch=function(e){e.sketchId=$("#"+t.sketchDOMId).data("sketchId"),e.beginPos,e.dogPos,e.rad=radius,e.dogM=0,e.dogB=0,e.m=.2,e.b=15,e.line1Pos,e.line2Pos,e.timeOnPath=0,e.timeMax=0,e.pathDist=0,e.pathDistMax,e.shouldRun=!1,e.myPoints=[],e.myPointTimer=0,e.myPointTimerLength=50,e.shouldTweakDirection=!1,e.lastTweakDirection=0,e.setup=function(){e.createCanvas(640,240),e.angleMode(e.DEGREES),e.fill(255),e.stroke(51),e.strokeWeight(2),e.dogM=e.random(-1,1),e.dogB=e.random(0+e.rad,e.height-e.rad),e.beginPos=e.getDogVector(0),e.dogPos=e.createVector(e.beginPos.x,e.beginPos.y),e.line1Pos=e.getPathVector(0),e.line2Pos=e.getPathVector(e.width)},e.draw=function(){e.background("#fff"),e.stroke("#333"),e.strokeWeight(6),e.line(e.line1Pos.x,e.line1Pos.y,e.line2Pos.x,e.line2Pos.y),e.shouldRun&&(e.isCircleOutOfBounds(e.dogPos,e.rad)?(e.toggleSimulation(),e.resetSketch(),t.shouldRunInfinitely&&(t.infiniteCallback&&t.infiniteCallback.params&&t.infiniteCallback.func.apply(t.infiniteCallback,t.infiniteCallback.params),e.toggleSimulation())):(e.dogPos.x+=2,e.dogPos=e.getDogVector(e.dogPos.x),e.pathDist+=Math.abs(e.dogPos.y-e.getPathVector(e.dogPos.x).y)),e.myPointTimer+e.myPointTimerLength<e.millis()&&(e.myPoints.length>500&&e.myPoints.shift(),e.myPoints.push(e.createVector(e.dogPos.x,e.dogPos.y)),e.myPointTimer=e.millis())),e.noFill(),e.strokeWeight(2);for(let t=0;t<e.myPoints.length;t++)e.point(e.myPoints[t].x,e.myPoints[t].y);e.fill("#333"),e.stroke("#555"),e.ellipse(e.dogPos.x,e.dogPos.y,e.rad,e.rad),e.updateScore()},e.getPathVector=function(t){var n=e.m*t+e.b,i=e.map(n,e.height,0,0,e.height);return e.createVector(t,i)},e.getDogVector=function(t){var n=e.dogM*t+e.dogB,i=e.map(n,e.height,0,0,e.height);return e.createVector(t,i)},e.isCircleOutOfBounds=function(t,n){var i=n/2,a=t.x-i>e.width||t.x+i<0;return a=a||t.y-i>e.height||t.y+i<0},e.toggleSimulation=function(n){var i=$("#"+t.sketchDOMId).siblings(".play-sketch");e.shouldRun=void 0!==n?n:!e.shouldRun,e.shouldRun?(e.myPointTimer=e.millis(),e.pathDist=0,i.text(t.stopText)):(e.resetSketch(),void 0===n&&e.checkHighScore(),i.text("Release Neura"))},e.resetSketch=function(){e.dogM=e.random(-1,1),e.dogB=e.random(0+e.rad,e.height-e.rad),e.dogPos.x=e.beginPos.x,e.dogPos.y=e.getDogVector(e.beginPos.x).y},e.updateScore=function(){$("#"+t.sketchDOMId).siblings(".all-score-container").find(".score-container span").text(e.pathDist.toFixed(2))},e.checkHighScore=function(){var n=$("#"+t.sketchDOMId).siblings(".all-score-container");(e.pathDist<e.pathDistMax||void 0===e.pathDistMax)&&(e.pathDistMax=e.pathDist,n.find(".highscore-container span").text(e.pathDist.toFixed(2)),e.shouldTweakDirection=!0)}},this.thisP5=new p5(this.thisSketch,t.sketchDOMId)};neuraSketches.push(new NeuraSketch({sketchDOMId:"intro-sketch-holder"})),neuraSketches.push(new NeuraSketch({sketchDOMId:"first-sketch-holder",turnRateSelector:".page-1 .sketch-holder-range"})),neuraSketches.push(new NeuraSketch({sketchDOMId:"second-sketch-holder",turnRateSelector:".page-2 input.angle",shouldRunInfinitely:!0,infiniteCallback:{func:randomizeTurningAngle,params:[".page-2 input.angle"]},stopText:"Stop Neura"})),neuraSketches.push(new NeuraSketch({sketchDOMId:"third-sketch-holder",turnRateSelector:".page-3 input.angle",shouldRunInfinitely:!0,infiniteCallback:{func:randomizeTurningAngle,params:[".page-3 input.angle",".page-3 .sketch-holder-range"]},stopText:"Stop Neura"})),neuraSketches.push(new NeuraSketch({sketchDOMId:"fourth-sketch-holder",turnRateSelector:".page-4 input.angle",shouldRunInfinitely:!0,infiniteCallback:{func:randomizeTurningAngle,params:[".page-4 input.angle",".page-4 .sketch-holder-range"]},stopText:"Stop Neura"}));var currentPage=0;function updateDOM(){$('input[type="range"]').each(function(e){$(this).siblings("span").text($(this).val())})}function randomizeTurningAngle(...e){var t=$("section.active .sketch-container").data("sketch-id"),n=neuraSketches[t].thisP5;if(e){var i=e[0],a=.01;e[1]&&(a=parseFloat($(e[1]).val())),a||(a=.01);var o=parseFloat($(i).val()),s=1;if(n.shouldTweakDirection&&0!==n.lastTweakDirection)$(".moving").text(s),n.shouldTweakDirection=!1,s=n.lastTweakDirection;else{var r=Math.random();r>.5?s=1:r<=.5&&(s=-1)}o+=a*s,n.lastTweakDirection=s,$(i).val(o.toFixed(4))}else console.error("No arguments given to randomizeTurningAngle")}$(document).ready(function(){$(".next-button").click(function(e){e.preventDefault(),$(".page-"+currentPage).removeClass("active"),neuraSketches[currentPage].thisP5.toggleSimulation(!1),currentPage++,$(".page-"+currentPage).addClass("active")}),$(".previous-button").click(function(e){e.preventDefault(),$(".page-"+currentPage).removeClass("active"),neuraSketches[currentPage].thisP5.toggleSimulation(!1),currentPage--,$(".page-"+currentPage).addClass("active")}),$(".play-sketch").click(function(e){e.preventDefault();var t=$(this).siblings(".sketch-container").data("sketch-id");neuraSketches[t].thisP5.shouldRun?neuraSketches[t].thisP5.toggleSimulation(!1):neuraSketches[t].thisP5.toggleSimulation()}),$('input[type="range"]').change(function(e){var t=$(this).parent().siblings(".sketch-container").data("sketch-id");neuraSketches[t].thisP5.toggleSimulation(!1)}),setInterval(updateDOM,50)});